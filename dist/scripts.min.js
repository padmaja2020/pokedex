let pokemonRepository = (function () {
  let e = [],
    t = "https://pokeapi.co/api/v2/pokemon/?limit=150";
  $(".container"), $(".row");
  function n(t) {
    return e.push(t);
  }
  function o(e) {
    $(".modal-header");
    let t = $(".modal-body"),
      n = $(".modal-title"),
      o = $(".modal-content");
    n.empty(), t.empty();
    let i = $("<h1 class = 'text-capitalize'>" + e.name + "</h1>"),
      s = $("<p><strong> Types:   " + e.types + "</strong></p>"),
      l = $("<p><strong> Id:  # " + e.id + "</strong></p>"),
      a = $("<p><strong> Weight:  " + e.weight + "</strong></p>"),
      p = (function (e) {
        let t = "";
        e.types.includes("grass")
          ? (t = "green")
          : e.types.includes("fire")
          ? (t = "red")
          : e.types.includes("water")
          ? (t = "blue")
          : e.types.includes("normal")
          ? (t = "gray")
          : e.types.includes("poison")
          ? (t = "purple")
          : e.types.includes("psychic")
          ? (t = "#f366b9")
          : e.types.includes("electric")
          ? (t = "yellow")
          : e.types.includes("fairy")
          ? (t = "light pink")
          : e.types.includes("fighting")
          ? (t = "#d56723")
          : e.types.includes("ground")
          ? (t = "#ab9842")
          : e.types.includes("rock")
          ? (t = "#a38c21")
          : e.types.includes("ice")
          ? (t = "light blue")
          : e.types.includes("ghost")
          ? (t = "#7b62a3")
          : e.types.includes("bug")
          ? (t = "green")
          : e.types.includes("dragon") && (t = "red");
        return t;
      })(e);
    $(o).css("background-color", p);
    let r = $("<p><strong>Height:  " + e.height + "</strong></p>"),
      c = $(
        "<img class = 'img-fluid pokemon-image' alt ='Pokemon Image' src = " +
          e.image +
          ">"
      );
    n.append(i),
      t.append(l),
      t.append(r),
      t.append(a),
      t.append(s),
      t.append(c);
  }
  return {
    add: n,
    getAll: function () {
      return e;
    },
    addListItem: function (e) {
      let t = $(".pokemon-list"),
        n = $(
          '<div id="list" class = " col-xs-12  list-group  col-md-3  "></div>'
        ),
        i = $(
          '<button type = "button"  class = " pokemon-name list-group-item list-group-action text-capitalize " data-toggle = "modal" data-target = "#modal-container">' +
            e.name +
            "</button>"
        );
      n.append(i),
        t.append(n),
        i.on("click", function (t) {
          !(function (e) {
            pokemonRepository.loadDetails(e).then(function () {
              o(e);
            });
          })(e);
        });
    },
    loadList: function () {
      return $.ajax(t, { dataType: "json" })
        .then(function (e) {
          return e;
        })
        .then(function (e) {
          e.results.forEach(function (e) {
            n({ name: e.name, detailsUrl: e.url });
          });
        })
        .catch(function (e) {
          console.error(e);
        });
    },
    loadDetails: function (e) {
      var t = e.detailsUrl;
      return $.ajax(t, { dataType: "json" })
        .then(function (e) {
          return e;
        })
        .then(function (t) {
          (e.image = t.sprites.front_default),
            (e.height = t.height),
            (e.weight = t.weight),
            (e.id = t.id),
            (e.types = []),
            t.types.forEach(function (t) {
              e.types.push(t.type.name);
            });
        })
        .catch(function (e) {
          console.error(e);
        });
    },
    showModal: o,
  };
})();
function myFunction() {
  let e, t, n, o, i, s, l;
  for (
    t = (e = document.getElementById("myInput")).value.toUpperCase(),
      o = (n = document.getElementById("myUL")).querySelectorAll("#list"),
      s = 0;
    s < o.length;
    s++
  )
    (i = o[s].getElementsByTagName("button")[0]),
      console.log(i.innerText),
      (l = i.textContent || i.innerText).toUpperCase().indexOf(t) > -1
        ? (o[s].style.display = "")
        : (o[s].style.display = "none");
}
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (e) {
    pokemonRepository.addListItem(e);
  });
});
